### 1. React Query 소개

react query 란 React 앱의 서버 상태를 관리하는 라이브러리를 말한다.

React Query는 **클라이언트에서 서버 데이터 캐시를 관리**

> 클라이언트 상태와 서버 상태
>
> **클라이언트 상태**란 웹 브라우저 세션과 관련된 모든 정보를 의미
> ex) 사용자는 브라우저에서 사용 언어를 변경하거나 다크 모드 등을 설정할 수 있는데 이는 서버와는 아무런 관련이 없으며 단순히 사용자의 상태를 추적하는 것
> **서버 상태**는 서버에 저장되지만 클라이언트에 표시하는데 필요한 데이터
> ex) 데이터 베이스에 저장하는 블로그 게시물의 데이터가 이에 해당

즉, React에서 서버 데이터가 필요할 때 Fetch나 Axios를 이용해 서버로 바로 이동하지 않고 **React Query 캐시를 요청**

여기서 React Query의 역할은 React Query 클라이언트를 어떻게 구성했느냐에 따라 해당 캐시의 데이터를 유지 관리하는 것으로
데이터를 관리하는 것은 React Query이지만 서버의 새 데이터로 캐시를 업데이트하는 시기를 설정하는 것은 사용자의 몫

#### React Query가 서버에서 데이터를 관리하는 방법

React Query는 캐시에 있는 데이터에 키를 할당에서 데이터를 식별하는데 이 데이터가 서버의 데이터와 일치하는지 확인하는 두가지 방법이 있음

1. 명령형으로 처리
   : 퀴리 클라이언트에 이 데이터를 무효화하고 캐시에 교체할 새 데이터를 서버에서 가지고 오게 지시

2. 선언형으로 처리
   : 리패치(refetch)를 트리거하는 조건을 구성
   eX) 브라우저 창이 다시 포커스 되었을 때
   staleTime을 이용해 다시 가져오기를 언제 트리거할지 정할 수도 있음
